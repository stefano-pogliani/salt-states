# Directory configuration.
<Directory "/var/www/owncloud">
  Options +FollowSymLinks
  AllowOverride All

  <IfModule mod_dav.c>
    Dav off
  </IfModule>

  SetEnv HOME /var/www/owncloud
  SetEnv HTTP_HOME /var/www/owncloud
</Directory>

<Directory "/var/www/owncloud/data/">
  # Just in case if .htaccess gets disabled
  Require all denied
</Directory>

<Directory "/data/owncloud/">
  # Just in case if .htaccess gets disabled
  Require all denied
</Directory>


# Virtual host configuration.
<VirtualHost *:443>
  # Application configuration.
  ServerName   spddns.no-ip.biz
  ServerAlias  nephele.sph nephele
  DocumentRoot /var/www/owncloud/

  ## Please enable this manually, if needed. See also
  ## https://doc.owncloud.org/server/8.2/admin_manual/issues/index.html#apple-ios
  # Redirect 301 /.well-known/carddav /owncloud/remote.php/carddav
  # Redirect 301 /.well-known/caldav  /owncloud/remote.php/caldav


  # SSL configuration.
  SSLEngine               On
  SSLCertificateFile      /data/www/certs/cloud.crt
  SSLCertificateKeyFile   /data/www/certs/cloud.key

  SSLProtocol             all -SSLv2 -SSLv3
  SSLHonorCipherOrder     On
  SSLCipherSuite          ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA

  # HSTS (mod_headers is required) (15768000 seconds = 6 months)
  Header always set Strict-Transport-Security "max-age=15768000; includeSubDomains; preload"
</VirtualHost>


# Disable HTTP version of the server.
<VirtualHost *:80>
  ServerName   spddns.no-ip.biz
  ServerAlias  nephele.sph nephele
  Redirect permanent / https://spddns.no-ip.biz:2351/
</VirtualHost>


# Disable server signatures.
Header unset Server
ServerSignature Off
ServerTokens Prod
